/*! jQuery Scrollz - v1.0.5 - 2013-03-01
* https://github.com/zippy1978/jquery.scrollz
* Copyright (c) 2013 Gilles Grousset; Licensed MIT, GPL */
(function(a){function c(){return"ontouchstart"in document.documentElement}function d(a){var b=g(a,"contentWrapper"),c=g(a,"pullHeader");return c?c.outerHeight(!0):0}function e(a,b){var d=a.data("options");if(!c()&&d.emulateTouchEvents)switch(b){case"touchstart":return"mousedown";case"touchend":return"mouseup";case"touchmove":return"mousemove"}return b}function f(a,b,c){var d=a.data("markup");d||(d={},a.data("markup",d)),d[b]=c}function g(a,b){var c=a.data("markup");return c?c[b]:null}function h(a,b,c){var d=a.data("tracking");d||(d={},a.data("tracking",d)),d[b]=c}function i(a,b){var c=a.data("tracking");return c?c[b]:null}function j(a){h(a,"startTouchTime",null),h(a,"startTouchY",null),h(a,"previousTouchTime",null),h(a,"previousTouchY",null),h(a,"lastTouchTime",null),h(a,"lastTouchY",null)}function k(a){a.attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none","-ms-user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})}function l(a,b){var c=a.data("options"),e=d(a);return c.pull&&b<e?e:b}function m(b){var c=b.data("options"),e=b.height(),g=a('<div class="scrollz-content-wrapper"/>'),h=a('<div class="scrollz-container"/>');h.css("height",e),h.css("overflow-x","hidden"),h.css("overflow-y","hidden"),c.styleClass&&h.addClass(c.styleClass),b.wrap(h).wrap(g),b.css("overflow-y","visible"),g=b.parent(),h=g.parent();var i=a('<div class="scrollz-thumb"></div>');i.css("position","absolute"),h.prepend(i),i=h.find(".scrollz-thumb"),i.hide(),b.css("height","auto"),b.css("min-height",e),f(b,"contentWrapper",g),f(b,"container",h),f(b,"scrollThumb",i);if(c.pull){var j=a(c.pullHeaderHTML.initial);j.addClass("scrollz-pull-header").addClass("initial"),g.prepend(j),f(b,"pullHeader",g.children(".scrollz-pull-header"));var l=d(b);e<l&&(h.css("height",l),b.css("min-height",l)),h.scrollTop(l),k(h)}}function n(b,c){var d=b.data("options"),e=g(b,"contentWrapper"),h=e.children(".scrollz-pull-header");h.hasClass(c)||h.replaceWith(a(d.pullHeaderHTML[c]).addClass("scrollz-pull-header").addClass(c)),f(b,"pullHeader",e.children(".scrollz-pull-header")),b.data("pullHeaderState",c)}function o(a){var b=a.data("pullHeaderState");return b||(b="initial"),b}function p(a){var b=a.data("options"),c=g(a,"container"),e=d(a);b.pull&&c.scrollTop()<e&&o(a)!=="waiting"&&(c.scrollTop()<e/2?(n(a,"waiting"),a.trigger("pulled")):c.animate({scrollTop:e},"fast"))}function q(a){var b=a.data("options"),c=g(a,"container"),d=i(a,"previousTouchY"),e=i(a,"lastTouchY"),f=i(a,"previousTouchTime"),h=new Date-f,j=d-e,k=Math.abs(j/h);if(b.inertia){var m=Math.pow(k,2)*750;j<0&&(m*=-1),c.stop(!0,!0),m!==0&&c.animate({scrollTop:l(a,c.scrollTop()+m)},{duration:k*750,easing:"easeOutCubic"})}}function r(a,b){if(o(b)!=="waiting"){var d=b.data("options"),e=g(b,"container");e.stop(),c()?h(b,"startTouchY",a.originalEvent.targetTouches[0].screenY):h(b,"startTouchY",a.screenY),h(b,"startTouchTime",new Date),h(b,"previousTouchY",i(b,"startTouchY")),h(b,"previousTouchTime",i(b,"startTouchTime")),h(b,"lastTouchY",i(b,"startTouchY")),h(b,"lastTouchTime",i(b,"startTouchTime")),h(b,"initialScrollPosition",e.scrollTop())}}function s(a,b){var d=g(b,"container"),e=i(b,"startTouchY"),f=i(b,"lastTouchY"),j=i(b,"lastTouchTime"),k=i(b,"initialScrollPosition");if(e){h(b,"previousTouchY",f),h(b,"previousTouchTime",j);var l=0;c()?(l=e-a.originalEvent.changedTouches[0].screenY+k,h(b,"lastTouchY",a.originalEvent.targetTouches[0].screenY)):(l=e-a.screenY+k,h(b,"lastTouchY",a.screenY)),h(b,"lastTouchTime",new Date),d.scrollTop(l)}}function t(a,b){var c=g(b,"container"),e=i(b,"startTouchY"),f=i(b,"previousTouchY"),h=i(b,"lastTouchY"),k=i(b,"initialScrollPosition");if(!e)return;e!==h&&a.preventDefault();var l=d(b);e<h&&c.scrollTop()<l?p(b):q(b),j(b)}function u(a,b){if(o(b)!=="waiting"){var c=g(b,"container"),e=i(b,"initialScrollPosition"),f=0;a.type==="mousewheel"?f=a.originalEvent.screenY-(a.originalEvent.screenY+a.originalEvent.wheelDeltaY):f=a.originalEvent.screenY-(a.originalEvent.screenY+a.originalEvent.detail*-1*3),c.scrollTop()+f<d(b)&&(f*=.05),c.scrollTop(c.scrollTop()+f)}}function v(a,b){var c=b.data("options"),e=g(b,"container"),f=g(b,"contentWrapper"),h=g(b,"scrollThumb"),i=1;if(!isNaN(c.bottomDetectionOffset))i=c.bottomDetectionOffset;else if(c.bottomDetectionOffset.indexOf("%")!==-1){var j=parseInt(c.bottomDetectionOffset.substring(0,c.bottomDetectionOffset.indexOf("%")),10)/100;i=(e.scrollTop()+e.height())*j}e.scrollTop()+e.height()+i>=e.get(0).scrollHeight&&b.trigger("bottomreached"),c.pull&&(e.scrollTop()<d(b)/2?n(b,"release"):n(b,"initial"));var k=d(b);if(e.scrollTop()>=k){var l=b.children().first(),m=b.children().last();l&&parseInt(l.css("marginTop"),10)>=0&&b.css("padding-top","1px"),m&&parseInt(m.css("marginBottom"),10)>=0&&b.css("padding-bottom","1px"),h.height(e.innerHeight()/f.outerHeight(!0)*(e.innerHeight()+k)-(h.outerHeight(!0)-h.outerHeight())),h.css("top",e.position().top+(e.scrollTop()-k)/f.outerHeight(!0)*e.innerHeight()),h.css("left",e.position().left+e.width()-h.outerWidth(!0))}else h.hide()}function w(a,b){var c=g(b,"container"),e=g(b,"scrollThumb");c.scrollTop()>d(b)&&(e.stop(!0,!0),e.fadeIn(500))}function x(a,b){var d=g(b,"scrollThumb");d.stop(!0,!0),d.delay(300).fadeOut(1e3);var e=i(b,"startTouchY");!c()&&!e&&p(b)}function y(a){return a.data("scrollzInitialized")!=null}var b={init:function(b){var c=a.extend({pull:!1,pullHeaderHTML:{initial:'<div><div class="icon"/><div class="label">Pull to refresh</div></div>',release:'<div><div class="icon"/><div class="label">Release to refresh</div></div>',waiting:'<div><div class="icon"/><div class="label">Refreshing...</div></div>'},inertia:!0,emulateTouchEvents:!1,bottomDetectionOffset:"10%"},b);a.easing.easeOutCubic===undefined&&(a.easing.easeOutCubic=function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c});if(!a.event.special.scrollstart&&!a.event.special.scrollend){var d=a.event.special,f="D"+ +(new Date),i="D"+(+(new Date)+1);d.scrollstart={setup:function(){var b,c=function(c){var e=this,f=arguments;b?clearTimeout(b):(c.type="scrollstart",a.event.dispatch.apply(e,f)),b=setTimeout(function(){b=null},d.scrollstop.latency)};a(this).bind("scroll",c).data(f,c)},teardown:function(){a(this).unbind("scroll",a(this).data(f))}},d.scrollstop={latency:300,setup:function(){var b,c=function(c){var e=this,f=arguments;b&&clearTimeout(b),b=setTimeout(function(){b=null,c.type="scrollstop",a.event.dispatch.apply(e,f)},d.scrollstop.latency)};a(this).bind("scroll",c).data(i,c)},teardown:function(){a(this).unbind("scroll",a(this).data(i))}}}return this.each(function(){var b=a(this);if(!y(b)){b.data("options",c),m(b);var d=g(b,"container");h(b,"initialScrollPosition",d.scrollTop()),d.bind(e(b,"touchstart"),function(a){r(a,b)}),d.bind(e(b,"touchmove"),function(a){a.preventDefault(),s(a,b)}),d.bind(e(b,"touchend"),function(a){t(a,b)}),a("*").not(d).bind(e(b,"touchend"),function(a){t(a,b)}),d.bind("mousewheel DOMMouseScroll",function(a){a.preventDefault(),u(a,b)}),d.scroll(function(a){v(a,b)}),d.bind("scrollstart",function(a){w(a,b)}),d.bind("scrollstop",function(a){x(a,b)}),b.data("scrollzInitialized",!0)}})},height:function(b){return this.each(function(){var c=a(this);if(y(c)){var d=c.data("options"),e=g(c,"container");e.height(b),c.css("min-height",e.css("height"))}})},hidePullHeader:function(b,c){return b=typeof b!="undefined"?b:!0,c=typeof c!="undefined"?c:undefined,this.each(function(){var e=a(this);if(y(e)){var f=e.data("options"),h=g(e,"container");f.pull&&(b?h.animate({scrollTop:d(e)},"fast",function(){n(e,"initial"),typeof c!="undefined"&&h.scrollTop(c)}):(typeof c!="undefined"?h.scrollTop(c):h.scrollTop(d(e)),n(e,"initial")))}})}};a.fn.scrollz=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):typeof c=="object"||!c?b.init.apply(this,arguments):(a.error("Method "+c+" does not exist"),null)},a.mobile&&(a(document).on("pagecreate",":jqmData(role='page')",function(){a(":jqmData(scrollz='simple')").scrollz(),a(":jqmData(scrollz='pull')").scrollz({pull:!0,emulateTouchEvents:!0})}),a(document).on("pageshow",":jqmData(role='page')",function(){a(window).resize()}),a(window).bind("orientationchange",function(b){b.orientation==="landscape"&&a.mobile.silentScroll(0)}),a(window).resize(function(){var b=0;a(".ui-page-active div.ui-header").each(function(){b+=a(this).outerHeight()});var c=0;a(".ui-page-active div.ui-footer").each(function(){c+=a(this).outerHeight()});var d=(window.innerHeight?window.innerHeight:a(window).height())-(b?b:0)-(c?c:0);a(":jqmData(scrollz='simple'), :jqmData(scrollz='pull')").scrollz("height",d)}))})(jQuery);